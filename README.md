# Проект на FastAPI и Telegram-бот с использованием Docker

Этот проект представляет собой веб-приложение на базе FastAPI с MongoDB и Redis, а также Telegram-бота на базе aiogram. Nginx используется как веб-сервер.

## Структура проекта

- `app/` — приложение FastAPI.
- `bot/` — Telegram-бот.
- `nginx/` — конфигурация Nginx и Dockerfile.
- `docker-compose.yml` — конфигурация Docker Compose.

## Установка и запуск

1. **Клонируйте репозиторий**

    ```bash
    git clone <URL вашего репозитория>
    cd <папка с проектом>
    ```

2. **Настройте ваш Telegram-бот**

   Откройте файл `bot/main.py` и замените `Твой BOT TOKEN` на токен вашего Telegram-бота.

3. **Постройте и запустите контейнеры**

    В корневой директории проекта выполните команду:

    ```bash
    docker-compose up --build
    ```

    Это создаст и запустит все необходимые контейнеры: FastAPI приложение, Telegram-бот, MongoDB, Redis и Nginx.

4. **Доступ к приложению**

    - FastAPI приложение доступно по адресу: [http://localhost:8000](http://localhost:8000)
    - Nginx работает на порту 80 и может использоваться для обслуживания статических файлов, если они будут добавлены в будущем.

## Описание компонентов

- **FastAPI приложение (`app/`)**

    Это веб-приложение на FastAPI, которое предоставляет два эндпоинта:
    
    - `GET /api/v1/messages/` — возвращает список всех сообщений.
    - `POST /api/v1/message/` — позволяет создать новое сообщение.

    MongoDB используется для хранения сообщений, а Redis для кеширования сообщений. Кеш очищается при добавлении нового сообщения.

- **Telegram-бот (`bot/`)**

    Бот, написанный с использованием aiogram, предоставляет следующие команды:

    - `/start` и `/help` — выводит приветственное сообщение.
    - `/messages` — возвращает список сообщений.
    - `/add <сообщение>` — добавляет новое сообщение от пользователя.

- **Nginx (`nginx/`)**

    Nginx настроен как веб-сервер для обслуживания статики. В данном примере, он не используется как обратный прокси.

## Используемые технологии

- **FastAPI** — веб-фреймворк для создания REST API.
- **MongoDB** — база данных для хранения сообщений.
- **Redis** — кеш для ускорения доступа к сообщениям.
- **Nginx** — веб-сервер.
- **Docker** и **Docker Compose** — для контейнеризации и управления приложениями.

